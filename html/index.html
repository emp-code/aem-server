<!doctype html>
<html lang="en">

	<head>
		<title>All-Ears Mail</title>
		<link rel="stylesheet" href="/css/main.css" type="text/css">
		<meta charset="utf-8">
	</head>

	<body>
		<header>
			<h1>All-Ears Mail</h1>
			<noscript>Javascript required</noscript>
		</header>

		<main>
			<div id="div_loggedin" hidden>
				<nav>
					<button type="button" autocomplete="off" id="btn_toinbox">Inbox</button>
					<button type="button" autocomplete="off" id="btn_towrite">Write</button>
					<button type="button" autocomplete="off" id="btn_tonotes">Notes</button>
					<button type="button" autocomplete="off" id="btn_toprefs">Prefs</button>
					<button type="button" autocomplete="off" id="btn_toadmin">Admin</button>
				</nav>

				<div class="maindiv" id="div_inbox">
					<table>
						<thead>
							<tr>
								<th>Time</th>
								<th>Title</th>
								<th>From</th>
								<th>To</th>
								<th>Delete</th>
							</tr>
						</thead>
						<tbody id="tbody_inbox">
						</tbody>
					</table>

					<div class="center">
						<button type="button" autocomplete="off" id="btn_msgdel" hidden class="topmargin">Delete selected messages</button>
					</div>
				</div>

				<div class="maindiv" id="div_write">
					<input id="send_title" type="text" required autocomplete="off" placeholder="Subject" class="topmargin"><br>
					<select id="send_from" class="topmargin"></select><br>
					<input id="send_to" type="email" required placeholder="receiver@example.com" class="topmargin"><br>
					<textarea id="send_body" required placeholder="Message" class="topmargin"></textarea><br>
					<input id="send_copy" type="checkbox" checked="checked" class="topmargin"> Save copy to Notes<br>
					<button type="button" autocomplete="off" id="btn_send" class="topmargin">Send</button>
				</div>

				<div class="maindiv" id="div_notes">
					<nav>
						<button type="button" autocomplete="off" id="btn_notes_contacts" disabled="disabled">Contacts</button>
						<button type="button" autocomplete="off" id="btn_notes_sent">Sent</button>
						<button type="button" autocomplete="off" id="btn_notes_texts">Texts</button>
						<button type="button" autocomplete="off" id="btn_notes_files">Files</button>
					</nav>

					<div id="div_notes_contacts" class="center">
						<table>
							<thead>
								<tr>
									<th>Email</th>
									<th>Name</th>
									<th>Notes</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody id="tbody_notes_contact">
							</tbody>
							<tfoot>
								<tr>
									<td><input type="email" id="txt_newcontact_mail" autocomplete="off" placeholder="email@example.com"></td>
									<td><input type="text" id="txt_newcontact_name" autocomplete="off" placeholder="Name"></td>
									<td><input type="text" id="txt_newcontact_note" autocomplete="off" placeholder="Notes"></td>
									<td class="center"><button type="button" autocomplete="off" id="btn_contact_add">Add</button></td>
								</tr>
							</tfoot>
						</table>

						<button type="button" autocomplete="off" id="btn_savenotes" hidden class="topmargin">Save changes</button>
					</div>

					<div id="div_notes_sent" hidden>
						<table>
							<thead>
								<tr>
									<th>Time</th>
									<th>Title</th>
									<th>From</th>
									<th>To</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody id="tbody_sentbox">
							</tbody>
						</table>

						<button type="button" autocomplete="off" id="btn_sentdel" hidden class="topmargin">Delete selected messages</button>
					</div>

					<div id="div_notes_texts" hidden>
						<table>
							<thead>
								<tr>
									<th>Time</th>
									<th>Title</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody id="tbody_textnotes">
							</tbody>
						</table>

						<button type="button" autocomplete="off" id="btn_notenew" class="topmargin">New</button>

						<button type="button" autocomplete="off" id="btn_notedel" hidden class="topmargin">Delete selected messages</button>
					</div>

					<div id="div_notes_files" hidden>
						<table>
							<thead>
								<tr>
									<th>Time</th>
									<th>Size</th>
									<th>Name</th>
									<th>Type</th>
									<th>Download</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody id="tbody_filenotes">
							</tbody>
						</table>

						<div class="topmargin">
							<input id="upfile" type="file"> <button type="button" autocomplete="off" id="btn_uploadfile">Add</button>
						</div>

						<a id="a_filedl" hidden></a>
					</div>

					<div id="div_newtextnote" hidden>
						<input id="txt_newnote_title" type="text" required autocomplete="off" placeholder="Title">
						<br>
						<textarea id="txt_newnote_body" required class="topmargin" placeholder="Contents"></textarea>
						<br>
						<button type="button" autocomplete="off" id="btn_newnote_save" class="topmargin">Save</button>
						<button type="button" autocomplete="off" id="btn_newnote_cancel" class="topmargin">Discard</button>
					</div>
				</div>

				<div class="maindiv" id="div_prefs">
					<nav>
						<button type="button" autocomplete="off" id="btn_prefs_addresses" disabled="disabled">Addresses</button>
						<button type="button" autocomplete="off" id="btn_prefs_gatekeeper">Gatekeeper</button>
					</nav>

					<div id="div_prefs_addresses">
						<table>
							<thead>
								<tr>
									<th></th>
									<th colspan="2">Internal</th>
									<th colspan="2">Email</th>
									<th></th>
								</tr>
								<tr>
									<th>Address</th>
									<th><abbr title="Accept mail">Acc</abbr></th>
									<th><abbr title="Share Public Key">SPK</abbr></th>
									<th><abbr title="Accept mail">Acc</abbr></th>
									<th><abbr title="Gatekeeper">Gk</abbr></th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody id="tbody_opt_addr">
							</tbody>
						</table>

						<div class="topmargin">
							<button type="button" autocomplete="off" id="btn_saveaddrdata" hidden>Save changes</button>
						</div>

						<div class="topmargin">
							Using <span id="addr_use_normal">?</span> out of <span id="addr_max_normal">?</span> normal addresses
							<br>
							<input type="text" id="txt_newaddress" pattern="[0-9a-z.-]{1,24}" maxlength="24" required autocomplete="off" placeholder="new-address">
							<button type="button" autocomplete="off" id="btn_newaddress">Register</button>
						</div>

						<div class="topmargin">
							Using <span id="addr_use_shield">?</span> out of <span id="addr_max_shield">?</span> Shield addresses
							<br>
							<button type="button" autocomplete="off" id="btn_newshieldaddress">Generate new Shield address</button>
						</div>
					</div>

					<div id="div_prefs_gatekeeper" hidden>
						<div class="center bold topmargin">Forbidden countries</div>
						<div>
							<select id="gatekeeper_country" multiple="multiple" autocomplete="off" size="8">
								<option value="DZ">Africa/Algeria</option>
								<option value="AO">Africa/Angola</option>
								<option value="BJ">Africa/Benin</option>
								<option value="BW">Africa/Botswana</option>
								<option value="BF">Africa/Burkina Faso</option>
								<option value="BI">Africa/Burundi</option>
								<option value="CV">Africa/Cabo Verde</option>
								<option value="CM">Africa/Cameroon</option>
								<option value="CF">Africa/Central African Republic</option>
								<option value="TD">Africa/Chad</option>
								<option value="KM">Africa/Comoros</option>
								<option value="CD">Africa/Congo</option>
								<option value="DJ">Africa/Djibouti</option>
								<option value="EG">Africa/Egypt</option>
								<option value="GQ">Africa/Equatorial Guinea</option>
								<option value="ER">Africa/Eritrea</option>
								<option value="SZ">Africa/Eswatini</option>
								<option value="ET">Africa/Ethiopia</option>
								<option value="GA">Africa/Gabon</option>
								<option value="GM">Africa/Gambia</option>
								<option value="GH">Africa/Ghana</option>
								<option value="GW">Africa/Guinea-Bissau</option>
								<option value="GN">Africa/Guinea</option>
								<option value="CI">Africa/Ivory Coast</option>
								<option value="KE">Africa/Kenya</option>
								<option value="LS">Africa/Lesotho</option>
								<option value="LR">Africa/Liberia</option>
								<option value="LY">Africa/Libya</option>
								<option value="MG">Africa/Madagascar</option>
								<option value="MW">Africa/Malawi</option>
								<option value="ML">Africa/Mali</option>
								<option value="MR">Africa/Mauritania</option>
								<option value="MU">Africa/Mauritius</option>
								<option value="YT">Africa/Mayotte</option>
								<option value="MA">Africa/Morocco</option>
								<option value="MZ">Africa/Mozambique</option>
								<option value="NA">Africa/Namibia</option>
								<option value="NE">Africa/Niger</option>
								<option value="NG">Africa/Nigeria</option>
								<option value="CG">Africa/Republic of the Congo</option>
								<option value="RW">Africa/Rwanda</option>
								<option value="RE">Africa/Réunion</option>
								<option value="SH">Africa/Saint Helena</option>
								<option value="SN">Africa/Senegal</option>
								<option value="SC">Africa/Seychelles</option>
								<option value="SL">Africa/Sierra Leone</option>
								<option value="SO">Africa/Somalia</option>
								<option value="ZA">Africa/South Africa</option>
								<option value="SS">Africa/South Sudan</option>
								<option value="SD">Africa/Sudan</option>
								<option value="ST">Africa/São Tomé and Príncipe</option>
								<option value="TZ">Africa/Tanzania</option>
								<option value="TG">Africa/Togo</option>
								<option value="TN">Africa/Tunisia</option>
								<option value="UG">Africa/Uganda</option>
								<option value="EH">Africa/Western Sahara</option>
								<option value="ZM">Africa/Zambia</option>
								<option value="ZW">Africa/Zimbabwe</option>
								<option value="AQ">Antarctica/Antarctica</option>
								<option value="BV">Antarctica/Bouvet Island</option>
								<option value="TF">Antarctica/French Southern Territories</option>
								<option value="HM">Antarctica/Heard Island and McDonald Islands</option>
								<option value="GS">Antarctica/South Georgia and the South Sandwich Islands</option>
								<option value="AF">Asia/Afghanistan</option>
								<option value="AM">Asia/Armenia</option>
								<option value="AZ">Asia/Azerbaijan</option>
								<option value="BH">Asia/Bahrain</option>
								<option value="BD">Asia/Bangladesh</option>
								<option value="BT">Asia/Bhutan</option>
								<option value="IO">Asia/British Indian Ocean Territory</option>
								<option value="BN">Asia/Brunei</option>
								<option value="KH">Asia/Cambodia</option>
								<option value="CN">Asia/China</option>
								<option value="CC">Asia/Cocos [Keeling] Islands</option>
								<option value="GE">Asia/Georgia</option>
								<option value="JO">Asia/Hashemite Kingdom of Jordan</option>
								<option value="HK">Asia/Hong Kong</option>
								<option value="IN">Asia/India</option>
								<option value="ID">Asia/Indonesia</option>
								<option value="IR">Asia/Iran</option>
								<option value="IQ">Asia/Iraq</option>
								<option value="IL">Asia/Israel</option>
								<option value="JP">Asia/Japan</option>
								<option value="KZ">Asia/Kazakhstan</option>
								<option value="KW">Asia/Kuwait</option>
								<option value="KG">Asia/Kyrgyzstan</option>
								<option value="LA">Asia/Laos</option>
								<option value="LB">Asia/Lebanon</option>
								<option value="MO">Asia/Macao</option>
								<option value="MY">Asia/Malaysia</option>
								<option value="MV">Asia/Maldives</option>
								<option value="MN">Asia/Mongolia</option>
								<option value="MM">Asia/Myanmar</option>
								<option value="NP">Asia/Nepal</option>
								<option value="KP">Asia/North Korea</option>
								<option value="OM">Asia/Oman</option>
								<option value="PK">Asia/Pakistan</option>
								<option value="PS">Asia/Palestine</option>
								<option value="PH">Asia/Philippines</option>
								<option value="QA">Asia/Qatar</option>
								<option value="SA">Asia/Saudi Arabia</option>
								<option value="SG">Asia/Singapore</option>
								<option value="KR">Asia/South Korea</option>
								<option value="LK">Asia/Sri Lanka</option>
								<option value="SY">Asia/Syria</option>
								<option value="TW">Asia/Taiwan</option>
								<option value="TJ">Asia/Tajikistan</option>
								<option value="TH">Asia/Thailand</option>
								<option value="TR">Asia/Turkey</option>
								<option value="TM">Asia/Turkmenistan</option>
								<option value="AE">Asia/United Arab Emirates</option>
								<option value="UZ">Asia/Uzbekistan</option>
								<option value="VN">Asia/Vietnam</option>
								<option value="YE">Asia/Yemen</option>
								<option value="AL">Europe/Albania</option>
								<option value="AD">Europe/Andorra</option>
								<option value="AT">Europe/Austria</option>
								<option value="BY">Europe/Belarus</option>
								<option value="BE">Europe/Belgium</option>
								<option value="BA">Europe/Bosnia and Herzegovina</option>
								<option value="BG">Europe/Bulgaria</option>
								<option value="HR">Europe/Croatia</option>
								<option value="CY">Europe/Cyprus</option>
								<option value="CZ">Europe/Czechia</option>
								<option value="DK">Europe/Denmark</option>
								<option value="EE">Europe/Estonia</option>
								<option value="FO">Europe/Faroe Islands</option>
								<option value="FI">Europe/Finland</option>
								<option value="FR">Europe/France</option>
								<option value="DE">Europe/Germany</option>
								<option value="GI">Europe/Gibraltar</option>
								<option value="GR">Europe/Greece</option>
								<option value="GG">Europe/Guernsey</option>
								<option value="HU">Europe/Hungary</option>
								<option value="IS">Europe/Iceland</option>
								<option value="IE">Europe/Ireland</option>
								<option value="IM">Europe/Isle of Man</option>
								<option value="IT">Europe/Italy</option>
								<option value="JE">Europe/Jersey</option>
								<option value="XK">Europe/Kosovo</option>
								<option value="LV">Europe/Latvia</option>
								<option value="LI">Europe/Liechtenstein</option>
								<option value="LU">Europe/Luxembourg</option>
								<option value="MT">Europe/Malta</option>
								<option value="MC">Europe/Monaco</option>
								<option value="ME">Europe/Montenegro</option>
								<option value="NL">Europe/Netherlands</option>
								<option value="MK">Europe/North Macedonia</option>
								<option value="NO">Europe/Norway</option>
								<option value="PL">Europe/Poland</option>
								<option value="PT">Europe/Portugal</option>
								<option value="LT">Europe/Republic of Lithuania</option>
								<option value="MD">Europe/Republic of Moldova</option>
								<option value="RO">Europe/Romania</option>
								<option value="RU">Europe/Russia</option>
								<option value="SM">Europe/San Marino</option>
								<option value="RS">Europe/Serbia</option>
								<option value="SK">Europe/Slovakia</option>
								<option value="SI">Europe/Slovenia</option>
								<option value="ES">Europe/Spain</option>
								<option value="SJ">Europe/Svalbard and Jan Mayen</option>
								<option value="SE">Europe/Sweden</option>
								<option value="CH">Europe/Switzerland</option>
								<option value="UA">Europe/Ukraine</option>
								<option value="GB">Europe/United Kingdom</option>
								<option value="VA">Europe/Vatican City</option>
								<option value="AX">Europe/Åland</option>
								<option value="AI">North America/Anguilla</option>
								<option value="AG">North America/Antigua and Barbuda</option>
								<option value="AW">North America/Aruba</option>
								<option value="BS">North America/Bahamas</option>
								<option value="BB">North America/Barbados</option>
								<option value="BZ">North America/Belize</option>
								<option value="BM">North America/Bermuda</option>
								<option value="BQ">North America/Bonaire, Sint Eustatius, and Saba</option>
								<option value="VG">North America/British Virgin Islands</option>
								<option value="CA">North America/Canada</option>
								<option value="KY">North America/Cayman Islands</option>
								<option value="CR">North America/Costa Rica</option>
								<option value="CU">North America/Cuba</option>
								<option value="CW">North America/Curaçao</option>
								<option value="DM">North America/Dominica</option>
								<option value="DO">North America/Dominican Republic</option>
								<option value="SV">North America/El Salvador</option>
								<option value="GL">North America/Greenland</option>
								<option value="GD">North America/Grenada</option>
								<option value="GP">North America/Guadeloupe</option>
								<option value="GT">North America/Guatemala</option>
								<option value="HT">North America/Haiti</option>
								<option value="HN">North America/Honduras</option>
								<option value="JM">North America/Jamaica</option>
								<option value="MQ">North America/Martinique</option>
								<option value="MX">North America/Mexico</option>
								<option value="MS">North America/Montserrat</option>
								<option value="NI">North America/Nicaragua</option>
								<option value="PA">North America/Panama</option>
								<option value="PR">North America/Puerto Rico</option>
								<option value="BL">North America/Saint Barthélemy</option>
								<option value="LC">North America/Saint Lucia</option>
								<option value="MF">North America/Saint Martin</option>
								<option value="PM">North America/Saint Pierre and Miquelon</option>
								<option value="VC">North America/Saint Vincent and the Grenadines</option>
								<option value="SX">North America/Sint Maarten</option>
								<option value="KN">North America/St Kitts and Nevis</option>
								<option value="TT">North America/Trinidad and Tobago</option>
								<option value="TC">North America/Turks and Caicos Islands</option>
								<option value="VI">North America/U.S. Virgin Islands</option>
								<option value="US">North America/United States</option>
								<option value="AS">Oceania/American Samoa</option>
								<option value="AU">Oceania/Australia</option>
								<option value="CX">Oceania/Christmas Island</option>
								<option value="CK">Oceania/Cook Islands</option>
								<option value="TL">Oceania/Democratic Republic of Timor-Leste</option>
								<option value="FM">Oceania/Federated States of Micronesia</option>
								<option value="FJ">Oceania/Fiji</option>
								<option value="PF">Oceania/French Polynesia</option>
								<option value="GU">Oceania/Guam</option>
								<option value="KI">Oceania/Kiribati</option>
								<option value="MH">Oceania/Marshall Islands</option>
								<option value="NR">Oceania/Nauru</option>
								<option value="NC">Oceania/New Caledonia</option>
								<option value="NZ">Oceania/New Zealand</option>
								<option value="NU">Oceania/Niue</option>
								<option value="NF">Oceania/Norfolk Island</option>
								<option value="MP">Oceania/Northern Mariana Islands</option>
								<option value="PW">Oceania/Palau</option>
								<option value="PG">Oceania/Papua New Guinea</option>
								<option value="PN">Oceania/Pitcairn Islands</option>
								<option value="WS">Oceania/Samoa</option>
								<option value="SB">Oceania/Solomon Islands</option>
								<option value="TK">Oceania/Tokelau</option>
								<option value="TO">Oceania/Tonga</option>
								<option value="TV">Oceania/Tuvalu</option>
								<option value="UM">Oceania/U.S. Minor Outlying Islands</option>
								<option value="VU">Oceania/Vanuatu</option>
								<option value="WF">Oceania/Wallis and Futuna</option>
								<option value="AR">South America/Argentina</option>
								<option value="BO">South America/Bolivia</option>
								<option value="BR">South America/Brazil</option>
								<option value="CL">South America/Chile</option>
								<option value="CO">South America/Colombia</option>
								<option value="EC">South America/Ecuador</option>
								<option value="FK">South America/Falkland Islands</option>
								<option value="GF">South America/French Guiana</option>
								<option value="GY">South America/Guyana</option>
								<option value="PY">South America/Paraguay</option>
								<option value="PE">South America/Peru</option>
								<option value="SR">South America/Suriname</option>
								<option value="UY">South America/Uruguay</option>
								<option value="VE">South America/Venezuela</option>
							</select>
						</div>

						<div class="center bold topmargin">Forbidden domains</div>
						<div><select id="gatekeeper_domain" size="8"></select></div>

						<div class="flex">
							<input id="txt_gkdomain" type="text" pattern="[0-9a-z.-]{1,100}\.[a-z.]{2,50}">
							<button type="button" autocomplete="off" id="btn_gkdomain_add">Add</button>
							<button type="button" autocomplete="off" id="btn_gkdomain_del">Del</button>
						</div>

						<div class="center bold topmargin">Forbidden senders</div>
						<div><select id="gatekeeper_addr" size="8"></select></div>

						<div class="flex">
							<input id="txt_gkaddr" type="email" required>
							<button type="button" autocomplete="off" id="btn_gkaddr_add">Add</button>
							<button type="button" autocomplete="off" id="btn_gkaddr_del">Del</button>
						</div>

						<div class="center topmargin">
							<button type="button" autocomplete="off" id="btn_savegkdata" hidden>Save changes</button>
						</div>
					</div>
				</div>

				<div class="maindiv" id="div_admin">
					<table>
						<thead>
							<tr>
								<th>Public key</th>
								<th><abbr title="Mebibyte">MiB</abbr></th>
								<th><abbr title="Level">Lvl</abbr></th>
								<th colspan="2">Adjust level</th>
								<th>Destroy</th>
							</tr>
						</thead>
						<tbody id="tbody_admin">
						</tbody>
					</table>

					<div class="topmargin">
						<input id="txt_newacc_pkey" type="text" class="mono" size="64" maxlength="64" required pattern="[0-9a-f]{64}" autocomplete="off" placeholder="Public key in hex">
						<button type="button" autocomplete="off" id="btn_admin_addaccount">Add</button>
					</div>
				</div>

				<div id="div_readmsg" hidden class="center">
					<h2 id="readmsg_title"></h2>

					<div id="readmsg_head" class="topmargin">
						<div id="readmsg_extmsg">
							IP: <span id="readmsg_ip"></span> (<span id="readmsg_country"></span>)
							<br>
							Greeting: <span id="readmsg_greet"></span>
							<br>
							Flags: <span id="readmsg_flags"></span>
							<br>
							TLS: <span id="readmsg_cs"></span>
							<br>
							<details>
								<summary>Headers</summary>
								<pre id="readmsg_headers"></pre>
							</details>
						</div>
						From <span id="readmsg_from"></span> <span id="readmsg_levelinfo">(Level <span id="readmsg_level"></span>)</span>
						<br>
						To <span id="readmsg_to"></span>
					</div>

					<div id="readmsg_body" class="topmargin"></div>
				</div>
			</div>

			<div id="div_login" class="center">
				<input id="txt_skey" type="password" size="64" maxlength="64" pattern="[0-9a-f]{64}" required autofocus placeholder="Secret key (hex)" class="center">
				<br>
				<button type="button" id="btn_signin" class="topmargin">Enter</button>
			</div>
		</main>

		<footer>
			Powered by All-Ears Mail (License: <abbr title="GNU Affero General Public License">AGPL</abbr>; <a rel="noopener" href="https://github.com/emp-code/ae-mail">Source</a>)
		</footer>

		<script src="https://cdn.jsdelivr.net/gh/google/brotli@1.0.7/js/decode.min.js" integrity="sha384-D02d+8Zt5n4/7mnD+GctnXcW7NBcKHdgDsl3msmWdkOG3094pdP0ceN/4c/zChml" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/js-nacl/1.3.2/nacl_factory.min.js" integrity="sha384-fEJkA7t1b4OIYQw6u7izunAHNluh0eYg/VYfyLpbii1Uy5ll6C7/lm17ouWa0rYV" crossorigin="anonymous"></script>

		<script src="/js/all-ears.js"></script>
		<script src="/js/main.js"></script>
	</body>
</html>
